<div class="base-card">
    <div class="flex justify-between">
        <h1 class="sm:w-100 flex-1 card-title">
            {{ project()!.spec.name || 'N/A' }}
        </h1>
        <h2 class="card-title hidden md:block">Created: {{ project()!.metadata.creationTimestamp || 'N/A' | date }}</h2>
    </div>

    <h2 class="card-title md:hidden">Created: {{ project()!.metadata.creationTimestamp || 'N/A' | date }}</h2>


    @if (loading()) {
    <app-placeholder></app-placeholder>
    } @else {

    @if (error() && error()!.action == 'list') {
    <p class="text-red-600">
        Error loading projects: {{ error()!.message }}
    </p>
    } @else {

    <p class="base-text pb-5">
        {{ project()!.spec.description || 'N/A' }}
    </p>

    <div class="sub-card">
        <div class="flex justify-between">
            <h2 class="sub-card-title">Members</h2>
        </div>

        <table class="w-full table-fixed">
            <thead class="border-gray-100 border-y dark:border-white/[0.05]">
                <tr>
                    <th scope="col" class="table-label">
                        Group
                    </th>
                    <th scope="col" class="table-label">
                        Username
                    </th>
                </tr>
            </thead>
            <tbody class="table-divider">
                @for (item of groups(); track $index) {
                @for (user of item.users; track $index) {
                <tr>
                    <td class="py-3">
                        <div class="flex items-center gap-[18px]">
                            <div>
                                <p class="base-text">
                                    {{item.groupName}}
                                </p>
                            </div>
                        </div>
                    </td>
                    <td class="py-3">
                        <div class="flex items-center w-full gap-5">
                            <div class="truncate">
                                <p class="mb-0.5 truncate base-text">
                                    {{user}}
                                </p>
                            </div>
                        </div>
                    </td>
                </tr>
                }
                }
            </tbody>
        </table>

    </div>

    <div class="sub-card">
        <div class="flex justify-between">
            <h2 class="sub-card-title">Roles</h2>
        </div>

        <table class="w-full table-fixed">
            <thead class="border-gray-100 border-y dark:border-white/[0.05]">
                <tr>
                    <th scope="col" class="table-label">
                        Role
                    </th>
                    <th scope="col" class="table-label">
                        Resource
                    </th>
                    <th scope="col" class="table-label">
                        Action
                    </th>
                </tr>
            </thead>
            <tbody class="table-divider">
                @for (item of roles(); track $index) {
                @for (rule of item.rules; track $index) {
                <tr>
                    <td class="py-3">
                        <div class="flex items-center gap-[18px]">
                            <div>
                                <p class="base-text">
                                    {{item.role}}
                                </p>
                            </div>
                        </div>
                    </td>
                    <td class="py-3">
                        <div class="flex items-center w-full gap-5">
                            <div class="truncate">
                                <p class="mb-0.5 truncate base-text">
                                    {{rule.resource}}
                                </p>
                            </div>
                        </div>
                    </td>
                    <td class="py-3">
                        <div class="flex items-center w-full gap-5">
                            <div class="truncate">
                                <p class="mb-0.5 truncate base-text">
                                    {{rule.action}}
                                </p>
                            </div>
                        </div>
                    </td>
                </tr>
                }
                }
            </tbody>
        </table>

    </div>

    }
    }
</div>